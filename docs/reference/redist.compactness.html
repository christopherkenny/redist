<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate compactness measures for a set of districts — redist.compactness • redist</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate compactness measures for a set of districts — redist.compactness" />
<meta property="og:description" content="redist.compactness is used to compute different compactness statistics for a 
shapefile. It currently computes the Polsby-Popper, Schwartzberg score, Length-Width Ratio,
Convex Hull score, Reock score, Boyce Clark Index, Fryer Holden score, Edges Removed number, 
and the log of the Spanning Trees." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">redist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Intro-to-redist.html">Intro-to-redist</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kosukeimai/redist/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate compactness measures for a set of districts</h1>
    <small class="dont-index">Source: <a href='https://github.com/kosukeimai/redist/blob/master/R/compactness.R'><code>R/compactness.R</code></a></small>
    <div class="hidden name"><code>redist.compactness.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>redist.compactness</code> is used to compute different compactness statistics for a 
shapefile. It currently computes the Polsby-Popper, Schwartzberg score, Length-Width Ratio,
Convex Hull score, Reock score, Boyce Clark Index, Fryer Holden score, Edges Removed number, 
and the log of the Spanning Trees.</p>
    </div>

    <pre class="usage"><span class='fu'>redist.compactness</span><span class='op'>(</span>
  shp <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>district_membership</span>,
  measure <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"PolsbyPopper"</span><span class='op'>)</span>,
  population <span class='op'>=</span> <span class='cn'>NULL</span>,
  adjacency <span class='op'>=</span> <span class='cn'>NULL</span>,
  nloop <span class='op'>=</span> <span class='fl'>1</span>,
  ncores <span class='op'>=</span> <span class='fl'>1</span>,
  counties <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>shp</th>
      <td><p>A SpatialPolygonsDataFrame or sf object. Required unless "EdgesRemoved"
and "logSpanningTree" with adjacency provided.</p></td>
    </tr>
    <tr>
      <th>district_membership</th>
      <td><p>A numeric vector (if only one map) or matrix with one row 
for each precinct and one column for each map. Required.</p></td>
    </tr>
    <tr>
      <th>measure</th>
      <td><p>A vector with a string for each measure desired. "PolsbyPopper", 
"Schwartzberg", "LengthWidth", "ConvexHull", "Reock", "BoyceClark", "FryerHolden",  
"EdgesRemoved", and "logSpanningTree" are implemented. Defaults to "PolsbyPopper". Use "all" to
return all implemented measures.</p></td>
    </tr>
    <tr>
      <th>population</th>
      <td><p>A numeric vector with the population for every observation. Is
only necessary when "FryerHolden" is used for measure. Defaults to NULL.</p></td>
    </tr>
    <tr>
      <th>adjacency</th>
      <td><p>A zero-indexed adjacency list. Only used for "EdgesRemoved" and "logSpanningTree".
Created with <code>redist.adjacency</code> if not supplied and needed. Default is NULL.</p></td>
    </tr>
    <tr>
      <th>nloop</th>
      <td><p>A numeric to specify loop number. Defaults to 1 if only one map provided 
and the column number if multiple maps given.</p></td>
    </tr>
    <tr>
      <th>ncores</th>
      <td><p>Number of cores to use for parallel computing. Default is 1.</p></td>
    </tr>
    <tr>
      <th>counties</th>
      <td><p>A numeric vector from 1:ncounties corresponding to counties. Required for "logSpanningTree".</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with a column that specifies the district, a column for 
each specified measure, and a column that specifies the map number.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function computes specified compactness scores for a map.  If 
there is more than one shape specified for a single district, it combines 
them, if necessary, and computes one score for each district.</p>
<p>Polsby-Popper is computed as $$\frac{4*\pi*A(d)}{P(d)^2}$$ where A is the area 
function, the district is d, and P is the perimeter function.</p>
<p>Schwartzberg is computed as $$\frac{P(d)}{2*\pi*\sqrt{\frac{A(d)}{\pi}}}$$
where A is the area function, the district is d, and P is the perimeter function.</p>
<p>The Length Width ratio is computed as $$\frac{length}{width}$$ where length
is the shorter of the maximum x distance and the maximum y distance. Width is 
the longer of the two values.</p>
<p>The Reock score is computed as $$\frac{A(d)}{A(CVH)}$$ where A is the area
function, d is the district, and CVH is the convex hull of the district.</p>
<p>The Boyce Clark Index is computed as $$1 - \sum_{1}^{16}\{\frac{|\frac{r_i}{\sum_ir_i}*100-6.25 |\}}{200}$$.
The \(r_i\) are the distances of the 16 radii computed from the geometric 
centroid of the shape to the most outward point of the shape that intersects
the radii, if the centroid is contained within the shape.  If the centroid
lies outside of the shape, a point on the surface is used, which will naturally
incur a penalty to the score.</p>
<p>The Fryer Holden score for each district is computed with $$Pop\odot D(precinct)^2$$,
where \(Pop\) is the population product matrix.  Each element is the 
product of the ith and jth precinct's populations.  D represents the distance, 
where the matrix is the distance between each precinct.  To fully compute this 
index, for any map, the sum of these values should be used as the numerator. 
The denominator can be calculated from the full enumeration of districts as the
smallest calculated numerator.</p>
<p>The log spanning tree measure is the log number of spanning trees.</p>
<p>The edges removed measure is number of egdes removed from the underlying adjacency graph.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Boyce, R., &amp; Clark, W. 1964. The Concept of Shape in Geography. 
Geographical Review, 54(4), 561-572.</p>
<p>Cox, E. 1927. A Method of Assigning Numerical and Percentage Values to the 
Degree of Roundness of Sand Grains. Journal of Paleontology, 1(3), 179-183.</p>
<p>Fryer R, Holden R. 2011. Measuring the Compactness of Political Districting Plans. 
Journal of Law and Economics.</p>
<p>Harris, Curtis C. 1964. “A scientific method of districting”. 
Behavioral Science 3(9), 219–225.</p>
<p>Maceachren, A. 1985. Compactness of Geographic Shape: Comparison and 
Evaluation of Measures. Geografiska Annaler. Series B, Human Geography, 67(1), 
53-67.</p>
<p>Polsby, Daniel D., and Robert D. Popper. 1991. “The Third Criterion: 
Compactness as a procedural safeguard against partisan gerrymandering.” 
Yale Law &amp; Policy Review 9 (2): 301–353.</p> 
<p>Reock, E. 1961. A Note: Measuring Compactness as a Requirement of Legislative 
Apportionment. Midwest Journal of Political Science, 5(1), 70-74.</p>
<p>Schwartzberg, Joseph E. 1966. Reapportionment, Gerrymanders, and the Notion 
of Compactness. Minnesota Law Review. 1701.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/r-spatial/lwgeom/'>lwgeom</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>redist</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='co'>#Create (or load) a shapefile, in this case the unit square </span>
<span class='va'>box</span> <span class='op'>&lt;-</span>  <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_polygon</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/sfc.html'>st_sfc</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sf.html'>st_as_sf</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='co'># Index the congressional districts</span>
<span class='va'>box</span> <span class='op'>&lt;-</span> <span class='va'>box</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>cds <span class='op'>=</span> <span class='fl'>1</span>, pop <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
<span class='co'># Run redist.compactness</span>
<span class='fu'>redist.compactness</span><span class='op'>(</span><span class='va'>box</span>, <span class='st'>"cds"</span>, <span class='st'>"pop"</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Ben Fifield, Christopher T. Kenny, Cory McCartan, Alexander Tarr, Jun Kawahara, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


